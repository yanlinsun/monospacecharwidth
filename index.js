'use strict';
const W2 = [12,1536,1537,1539,1540,1589,1590,1693,1694,1706,1757,1758,1787,1811,1812,1822,1823,1838,1922,1936,1949,1950,1951,2039,2223,2307,2310,2314,2315,2321,2322,2323,2324,2325,2326,2329,2347,2355,2356,2363,2366,2367,2368,2377,2378,2379,2380,2382,2383,2384,2392,2393,2398,2400,2420,2421,2434,2435,2436,2437,2438,2440,2442,2443,2448,2452,2453,2460,2462,2475,2494,2495,2496,2503,2504,2505,2506,2507,2508,2519,2528,2529,2540,2563,2566,2567,2568,2622,2623,2624,2676,2691,2692,2693,2694,2698,2699,2710,2723,2732,2750,2751,2752,2761,2762,2763,2764,2801,2818,2819,2822,2832,2859,2880,2887,2888,2889,2890,2891,2892,2921,2949,2950,2951,2953,2958,2959,2960,2961,2962,2963,2965,2966,2967,2968,2969,2972,2973,2974,2975,2980,3006,3007,3009,3015,3024,3062,3065,3066,3084,3088,3092,3094,3096,3098,3099,3102,3103,3116,3117,3118,3121,3122,3124,3127,3128,3129,3137,3139,3160,3175,3176,3179,3182,3199,3222,3224,3225,3226,3227,3228,3230,3231,3233,3234,3235,3249,3250,3253,3255,3257,3262,3264,3265,3267,3271,3272,3298,3299,3310,3314,3330,3331,3335,3339,3340,3346,3349,3350,3351,3353,3354,3356,3361,3364,3365,3367,3368,3369,3370,3371,3375,3376,3378,3379,3381,3382,3384,3386,3399,3424,3431,3432,3435,3438,3439,3440,3441,3462,3463,3464,3466,3468,3469,3471,3474,3476,3477,3482,3483,3484,3486,3487,3489,3492,3493,3494,3496,3497,3498,3499,3500,3501,3504,3505,3510,3511,3512,3513,3521,3523,3524,3535,3536,3537,3544,3545,3546,3551,3559,3560,3562,3564,3567,3571,3596,3597,3602,3603,3675,3804,3805,3847,3858,3864,3898,3899,4048,4096,4099,4102,4106,4111,4112,4113,4120,4122,4124,4126,4127,4129,4130,4131,4132,4137,4140,4145,4152,4173,4175,4182,4183,4194,4195,4196,4224,4227,4228,4231,4232,4233,4234,4235,4236,4239,4250,4251,4252,4255,4262,4263,4266,4269,4270,4275,4288,4307,4314,4609,4615,4622,4625,4626,4628,4641,4642,4644,4645,4647,4657,4665,4682,4685,4698,4701,4705,4709,4713,4717,4742,4743,4744,4745,4746,4749,4777,4783,4784,4785,4786,4789,4793,4794,4796,4800,4801,4802,4803,4804,4805,4809,4813,4815,4847,4849,4852,4855,4857,4860,4863,4865,4868,4871,4882,4940,4947,4953,4985,4988,4993,4994,4995,4996,4997,4999,5000,5001,5003,5005,5007,5013,5015,5016,5028,5042,5043,5047,5049,5061,5063,5064,5065,5066,5069,5083,5089,5096,5098,5100,5103,5107,5138,5139,5140,5141,5143,5144,5145,5146,5163,5165,5166,5223,5224,5225,5226,5321,5322,5323,5325,5340,5341,5342,5343,5344,5345,5347,5349,5350,5352,5388,5389,5467,5468,5480,5481,5487,5526,5615,5616,5621,5622,5627,5628,5640,5641,5684,5685,5690,5691,5710,5711,5716,5717,5723,5724,5729,5730,5735,5736,6024,6025,6029,6030,6031,6034,6035,6036,6039,6040,6041,6043,6063,6070,6087,6088,6099,6106,6115,6145,6323,6326,6336,6337,6338,6368,6371,6372,6373,6381,6386,6486,6487,6490,6492,6494,6528,6529,6530,6532,6537,6541,6542,6544,6550,6551,6552,6555,6556,6557,6559,6560,6566,6570,6582,6588,6589,6591,6592,6597,6615,6622,6623,6634,6635,6636,6637,6638,6639,6650,6651,6652,6653,6654,6655,6657,6660,6667,6670,6671,6672,6674,6675,6677,6681,6682,7393,7401,7402,7403,7404,8232,8233,8241,8251,8255,8256,8258,8263,8272,8276,8283,8448,8451,8454,8457,8459,8460,8475,8480,8481,8492,8499,8506,8507,8527,8528,8529,8530,8546,8547,8549,8550,8552,8554,8555,8559,8566,8567,8571,8576,8578,8584,8604,8605,8606,8608,8610,8611,8612,8614,8619,8620,8621,8633,8636,8637,8640,8641,8644,8646,8647,8649,8651,8652,8653,8654,8655,8656,8658,8660,8666,8667,8668,8669,8672,8674,8676,8677,8678,8680,8688,8692,8748,8749,8751,8752,8761,8788,8789,8797,8810,8811,8874,8875,8879,8886,8887,8888,8904,8920,8921,8943,8972,8973,8974,8975,8978,8979,8983,8984,8986,8987,9003,9004,9005,9012,9014,9050,9052,9053,9054,9055,9056,9057,9061,9062,9063,9065,9071,9072,9073,9074,9084,9085,9086,9089,9090,9091,9095,9109,9134,9167,9172,9173,9174,9175,9176,9177,9179,9186,9188,9189,9190,9193,9194,9195,9196,9252,9602,9603,9605,9606,9607,9609,9610,9611,9613,9614,9615,9645,9646,9647,9648,9649,9651,9653,9654,9655,9657,9659,9661,9663,9664,9665,9667,9669,9670,9671,9672,9673,9677,9678,9727,9728,9729,9732,9733,9734,9737,9742,9743,9744,9745,9746,9748,9749,9753,9754,9755,9756,9757,9758,9760,9763,9769,9770,9798,9832,9836,9855,9875,9878,9881,9884,9886,9887,9888,9889,9891,9892,9897,9898,9899,9902,9903,9904,9910,10009,10010,10011,10012,10016,10018,10019,10020,10021,10024,10032,10033,10034,10035,10036,10037,10070,10084,10087,10132,10133,10134,10135,10137,10152,10153,10154,10155,10156,10159,10160,10161,10177,10184,10185,10190,10191,10197,10198,10199,10202,10203,10204,10205,10206,10212,10213,10508,10509,10510,10511,10512,10513,10547,10548,10549,10570,10571,10574,10576,10578,10579,10582,10583,10586,10587,10590,10591,10594,10596,10608,10609,10610,10611,10612,10613,10615,10618,10697,10716,10717,10718,10719,10732,10733,10740,10752,10753,10754,10759,10760,10781,10784,10797,10798,10826,10827,10868,10869,10915,10916,10939,10940,10957,10958,10981,10999,11000,11003,11008,11009,11010,11011,11012,11013,11016,11017,11018,11019,11020,11044,11045,11046,11047,11048,11054,11055,11056,11057,11058,11088,11093,11094,11095,11096,11097,11100,11101,11104,11106,11118,11119,11120,11122,11165,11167,11170,11171,11176,11177,11178,11179,11266,11267,11268,11270,11272,11273,11274,11278,11279,11285,11295,11301,11303,11304,11305,11306,11333,11351,11352,11353,11440,11458,11495,11498,11513,11516,11525,11527,11530,11533,11536,11539,11540,11547,11548,11552,11557,11569,11570,11584,11585,11604,11605,11609,11610,11619,11621,11622,11623,11648,11649,11650,11651,11652,11653,11662,11663,11664,11668,11709,11710,11721,11729,11730,11732,11790,11843,42207,42218,42242,42243,42244,42245,42246,42249,42250,42251,42264,42265,42266,42267,42271,42272,42274,42276,42277,42278,42280,42281,42283,42287,42288,42291,42292,42298,42299,42300,42302,42304,42305,42306,42309,42312,42322,42323,42329,42333,42336,42337,42338,42339,42340,42341,42345,42347,42349,42350,42352,42353,42354,42356,42357,42360,42361,42363,42383,42384,42386,42387,42389,42390,42392,42395,42396,42399,42400,42401,42402,42403,42407,42424,42427,42428,42429,42430,42432,42433,42434,42437,42438,42439,42440,42449,42450,42451,42452,42453,42454,42459,42460,42464,42466,42468,42469,42470,42471,42504,42506,42507,42508,42511,42514,42516,42517,42520,42522,42523,42525,42526,42538,42572,42576,42578,42580,42582,42586,42588,42594,42596,42598,42599,42602,42604,42605,42608,42628,42629,42630,42642,42646,42648,42649,42802,42804,42806,42808,42810,42812,42826,42830,42831,42840,42848,42867,42934,43005,43007,43072,43073,43074,43085,43086,43092,43100,43103,43108,43119,43120,43260,43419,43420,43421,43422,43437,43438,43439,43440,43441,43442,43444,43445,43450,43451,43454,43473,43474,43475,43479,43480,43481,43487,43489,43490,43491,43492,43513,43514,43515,43516,43628,43630,43633,43634,43636,43637,43638,43639,43642,43643,43645,43785,43788,43843,43844,43927,43929,43933,43962,43967,43968,43969,43971,43972,43974,43975,43976,43977,43979,43980,43981,43982,43985,43986,43988,43991,43995,43998,43999,44003,44004,44006,44007,44019,64399,64403,64407,64411,65012,65020,65533];
const W3 = [2954,2979,3001,3010,3011,3012,3013,3014,3016,3031,3063,3083,3101,3119,3138,3140,3168,3169,3210,3229,3247,3266,3268,3274,3276,3296,3297,3333,3334,3336,3338,3342,3343,3347,3348,3352,3355,3357,3358,3362,3363,3372,3383,3385,3398,3403,3415,3425,3433,3436,3442,3450,3470,3472,3475,3478,3491,3548,3549,3550,3561,3570,3572,4159,4992,6104,8551,9138,9139,10764,10870,10917,10967,10968,11059,11708,42270,42275,42512,43418,43423,43436,43457,43458];
const W4 = [2964,3018,3019,3061,3064,3275,3344,3400,3401,3402,3404,3547,4138,11834,43459,43460,43461];
const W5 = [3020,11835];
const W12 = [65021];
const R2 = [[12443,40917],[44032,57343],[63744,64109],[11904,12245],[4352,4607],[12272,12438],[43647,43777],[9332,9449],[43518,43617],[65281,65374],[9917,9990],[9200,9250],[65095,65131],[9016,9047],[11134,11163],[43360,43388],[11060,11084],[11193,11217],[9800,9823],[42476,42498],[9703,9724],[10039,10060],[65072,65092],[10672,10691],[5395,5412],[2768,2784],[4896,4911],[9150,9165],[10224,10239],[5207,5221],[11022,11036],[3047,3060],[8853,8865],[10163,10175],[10516,10528],[9620,9631],[9690,9701],[9774,9785],[10139,10150],[11696,11707],[43406,43417],[43424,43435],[6342,6352],[9992,10002],[3073,3082],[3211,3220],[3237,3246],[3285,3294],[4199,4208],[8694,8703],[9461,9470],[9842,9851],[9862,9871],[65040,65049],[3451,3459],[4631,4639],[6045,6053],[43395,43403],[2701,2708],[2993,3000],[3105,3112],[3202,3209],[4832,4839],[5184,5191],[6078,6085],[9634,9641],[9680,9687],[10496,10503],[10598,10605],[10804,10811],[11184,11191],[42254,42261],[42369,42376],[42412,42419],[43495,43502],[43619,43626],[65209,65216],[2985,2991],[3390,3396],[3443,3449],[4216,4222],[5518,5524],[5744,5750],[6016,6022],[8994,9000],[10062,10068],[10562,10568],[11680,11686],[42314,42320],[43808,43814],[65504,65510]];

function charWidth(ch) {
    let c = ch.codePointAt(0);
    if (c < 1536) {
        return 1;
    }
    for (let i = 0; i < R2.length; i++) {
        if (c >= R2[i][0] && c <= R2[i][1]) {
            return 2;
        }
    }
    if (W2.includes(c)) {
        return 2;
    } else if (W3.includes(c)) {
        return 3;
    } else if (W4.includes(c)) {
        return 4;
    } else if (W5.includes(c)) {
        return 5;
    } else if (W12.includes(c)) {
        return 12;
    }
    return 1;
}

function strWidth(str) {
    let w = 0;
    for (let c of str) {
        w += charWidth(c);
    }
    return w;
}

module.exports = { charWidth, strWidth };
